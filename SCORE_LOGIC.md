# æ„Ÿæƒ…åˆ†æã‚¹ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ä»•æ§˜æ›¸

## ğŸ“Š **æ¦‚è¦**

æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ã‚³ã‚¹ãƒˆãƒ•ãƒªãƒ¼ã®ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹æ„Ÿæƒ…åˆ†æã«ã‚ˆã‚Šã€ã‚¢ãƒ©ãƒ¼ãƒˆã‚’è‡ªå‹•çš„ã«æ—¢å­˜ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã«åˆ†é¡ã—ã€å„ªå…ˆåº¦ã‚’æ±ºå®šã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## ğŸ¯ **ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ**

### **1. æ„Ÿæƒ…åˆ†æã‚¨ãƒ³ã‚¸ãƒ³**
- **æ–¹å¼**: ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°ï¼‰
- **ã‚³ã‚¹ãƒˆ**: å®Œå…¨ç„¡æ–™
- **ç²¾åº¦**: è¨­å®šå¯èƒ½ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã‚ˆã‚‹é«˜ç²¾åº¦åˆ†é¡

### **2. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ **
- **å„ªå…ˆåº¦**: 4æ®µéšï¼ˆä½ãƒ»ä¸­ãƒ»é«˜ãƒ»ç·Šæ€¥ï¼‰
- **æ„Ÿæƒ…ã‚¹ã‚³ã‚¢**: 0.0ã€œ1.5ã®ç¯„å›²
- **ä¿¡é ¼åº¦**: 0.1ã€œ1.0ã®ç¯„å›²

## ğŸ” **æ„Ÿæƒ…åˆ†æãƒ­ã‚¸ãƒƒã‚¯**

### **æ„Ÿæƒ…ã‚«ãƒ†ã‚´ãƒªå®šç¾©**

| æ„Ÿæƒ… | èª¬æ˜ | ã‚¹ã‚³ã‚¢ | å„ªå…ˆåº¦ |
|------|------|--------|--------|
| `positive` | ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ»æº€è¶³ | 0.5 | ä½ |
| `neutral` | ä¸­ç«‹çš„ãƒ»æ™®é€š | 0.8 | ä¸­ |
| `negative` | ãƒã‚¬ãƒ†ã‚£ãƒ–ãƒ»ä¸æº€ | 1.0 | é«˜ |
| `urgent` | ç·Šæ€¥ãƒ»è‡³æ€¥ | 1.5 | ç·Šæ€¥ |

### **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³è©³ç´°**

#### **ã‚¯ãƒ¬ãƒ¼ãƒ ãƒ»è‹¦æƒ…ç³»**
```typescript
{
  keywords: ['ã‚¯ãƒ¬ãƒ¼ãƒ ', 'è‹¦æƒ…', 'ä¸æº€', 'å•é¡Œ', 'ãƒˆãƒ©ãƒ–ãƒ«', 'å›°ã£ãŸ', 'å›°ã£ã¦ã„ã¾ã™', 'æ”¹å–„', 'å¯¾å¿œ', 'è§£æ±º', 'è¬ç½ª', 'ç”³ã—è¨³', 'ã™ã¿ã¾ã›ã‚“', 'ã”è¿·æƒ‘'],
  sentiment: 'negative',
  priority: 'high',
  score: 1.0,
  category: 'customer_service'
}
```

#### **ç·Šæ€¥å¯¾å¿œ**
```typescript
{
  keywords: ['ç·Šæ€¥', 'è‡³æ€¥', 'æ€¥ã', 'æ—©æ€¥', 'ã™ã', 'ä»Šã™ã', 'å³åº§', 'å³æ™‚', 'æœŸé™', 'ç· åˆ‡', 'ç´æœŸ', 'é–“ã«åˆã‚ãªã„', 'é…ã‚Œã‚‹', 'é…å»¶'],
  sentiment: 'urgent',
  priority: 'critical',
  score: 1.5,
  category: 'urgent'
}
```

#### **ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»è§£ç´„**
```typescript
{
  keywords: ['ã‚­ãƒ£ãƒ³ã‚»ãƒ«', 'è§£ç´„', 'ä¸­æ­¢', 'åœæ­¢', 'çµ‚äº†', 'ç ´æ£„', 'å–ã‚Šæ¶ˆã—', 'ã‚„ã‚ãŸã„', 'ã‚„ã‚ã‚‹', 'è¾é€€', 'æ–­ã‚‹', 'ãŠæ–­ã‚Š'],
  sentiment: 'negative',
  priority: 'high',
  score: 1.2,
  category: 'business_risk'
}
```

#### **ä¾¡æ ¼ãƒ»æ–™é‡‘**
```typescript
{
  keywords: ['é«˜ã„', 'é«˜é¡', 'æ–™é‡‘', 'ä¾¡æ ¼', 'è²»ç”¨', 'ã‚³ã‚¹ãƒˆ', 'äºˆç®—', 'å‰²å¼•', 'å€¤å¼•ã', 'å®‰ã', 'å®‰ä¾¡', 'ç„¡æ–™', 'ã‚¿ãƒ€'],
  sentiment: 'neutral',
  priority: 'medium',
  score: 0.8,
  category: 'pricing'
}
```

#### **å“è³ªãƒ»å“è³ªå•é¡Œ**
```typescript
{
  keywords: ['å“è³ª', 'è³ª', 'æ‚ªã„', 'ç²—æ‚ª', 'ä¸è‰¯', 'ä¸å…·åˆ', 'æ•…éšœ', 'ã‚¨ãƒ©ãƒ¼', 'ãƒã‚°', 'å•é¡Œ', 'æ¬ é™¥', 'åŠ£åŒ–'],
  sentiment: 'negative',
  priority: 'high',
  score: 1.3,
  category: 'quality'
}
```

#### **ç«¶åˆãƒ»ä»–ç¤¾**
```typescript
{
  keywords: ['ä»–ç¤¾', 'ç«¶åˆ', 'ãƒ©ã‚¤ãƒãƒ«', 'æ¯”è¼ƒ', 'æ¤œè¨', 'è¦‹ç©ã‚‚ã‚Š', 'ç›¸è¦‹ç©ã‚‚ã‚Š', 'ä»–ç¤¾ã®æ–¹ãŒ', 'ä»–ç¤¾ãªã‚‰'],
  sentiment: 'neutral',
  priority: 'medium',
  score: 0.9,
  category: 'competition'
}
```

#### **å–¶æ¥­ãƒ»ææ¡ˆ**
```typescript
{
  keywords: ['ææ¡ˆ', 'å–¶æ¥­', 'å•†è«‡', 'æ‰“ã¡åˆã‚ã›', 'ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°', 'ãƒ—ãƒ¬ã‚¼ãƒ³', 'ãƒ‡ãƒ¢', 'è¦‹ç©ã‚‚ã‚Š', 'å¥‘ç´„', 'å°å…¥'],
  sentiment: 'positive',
  priority: 'medium',
  score: 0.7,
  category: 'sales'
}
```

#### **æ„Ÿè¬ãƒ»æº€è¶³**
```typescript
{
  keywords: ['ã‚ã‚ŠãŒã¨ã†', 'æ„Ÿè¬', 'ç´ æ™´ã‚‰ã—ã„', 'è‰¯ã„', 'å„ªç§€', 'å®Œç’§', 'æº€è¶³', 'å–œã³', 'å¬‰ã—ã„', 'æ¥½ã—ã„', 'æœŸå¾…', 'å¸Œæœ›', 'æˆåŠŸ', 'é”æˆ', 'å®Œäº†'],
  sentiment: 'positive',
  priority: 'low',
  score: 0.5,
  category: 'satisfaction'
}
```

#### **å‚¬ä¿ƒãƒ»æœªå¯¾å¿œ**
```typescript
{
  keywords: ['ã¾ã ã§ã™ã‹', 'ã„ã¤ã¾ã§', 'å¯¾å¿œã—ã¦', 'è¿”äº‹ãŒãªã„', 'å¾…ã£ã¦ã„ã¾ã™', 'é…ã„', 'æ—©ã', 'æ€¥ã„ã§', 'æœŸé™', 'ç· åˆ‡', 'ç´æœŸ', 'é–“ã«åˆã‚ãªã„', 'é…ã‚Œã‚‹', 'é…å»¶', 'ãŠå¾…ã¡', 'ã”é€£çµ¡', 'ã”è¿”äº‹'],
  sentiment: 'negative',
  priority: 'medium',
  score: 1.1,
  category: 'follow_up'
}
```

## ğŸ¯ **ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯**

### **1. æ„Ÿæƒ…ã‚¹ã‚³ã‚¢è¨ˆç®—**
```typescript
// å„ã‚«ãƒ†ã‚´ãƒªã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒæ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
const matches = pattern.keywords.filter(keyword =>
  text.toLowerCase().includes(keyword.toLowerCase())
)

// æ„Ÿæƒ…ã‚¹ã‚³ã‚¢ã‚’ç´¯ç©
sentimentScores[pattern.sentiment] += pattern.score * matches.length
```

### **2. å„ªå…ˆåº¦ã‚¹ã‚³ã‚¢è¨ˆç®—**
```typescript
// å„ªå…ˆåº¦ã®é‡ã¿ä»˜ã‘
const weights = { 'low': 1, 'medium': 2, 'high': 3, 'critical': 4 }

// æœ€é«˜å„ªå…ˆåº¦ã‚’æ±ºå®š
let highestPriority = 'low'
if (getPriorityWeight(pattern.priority) > getPriorityWeight(highestPriority)) {
  highestPriority = pattern.priority
}
```

### **3. ç·åˆã‚¹ã‚³ã‚¢è¨ˆç®—**
```typescript
// å…¨æ„Ÿæƒ…ã‚¹ã‚³ã‚¢ã®åˆè¨ˆ
const totalScore = Object.values(sentimentScores).reduce((a, b) => a + b, 0)

// æ”¯é…çš„æ„Ÿæƒ…ã‚’æ±ºå®š
let dominantSentiment = 'neutral'
if (totalScore > 0) {
  const maxScore = Math.max(...Object.values(sentimentScores))
  dominantSentiment = Object.keys(sentimentScores).find(key =>
    sentimentScores[key] === maxScore
  ) || 'neutral'
}
```

## ğŸ—‚ï¸ **æ—¢å­˜ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°**

### **ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«**

| æ„Ÿæƒ… | ã‚«ãƒ†ã‚´ãƒª | æ—¢å­˜ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ | ä¿¡é ¼åº¦ |
|------|----------|----------------|--------|
| `negative` | `customer_service` | ã‚¯ãƒ¬ãƒ¼ãƒ ãƒ»è‹¦æƒ…ç³» | 0.8 |
| `negative` | `business_risk` | ç¤¾å†…å‘ã‘å±æ©Ÿé€šå ± | 0.9 |
| `negative` | `quality` | ã‚¯ãƒ¬ãƒ¼ãƒ ãƒ»è‹¦æƒ…ç³» | 0.8 |
| `negative` | `urgent` | ç¤¾å†…å‘ã‘å±æ©Ÿé€šå ± | 0.9 |
| `negative` | `pricing` | å‚¬ä¿ƒãƒ»æœªå¯¾å¿œã®ä¸æº€ | 0.8 |
| `negative` | `competition` | å‚¬ä¿ƒãƒ»æœªå¯¾å¿œã®ä¸æº€ | 0.8 |
| `negative` | `follow_up` | å‚¬ä¿ƒãƒ»æœªå¯¾å¿œã®ä¸æº€ | 0.8 |
| `urgent` | `urgent` | ç¤¾å†…å‘ã‘å±æ©Ÿé€šå ± | 1.0 |
| `urgent` | `customer_service` | ã‚¯ãƒ¬ãƒ¼ãƒ ãƒ»è‹¦æƒ…ç³» | 0.9 |
| `urgent` | `business_risk` | ç¤¾å†…å‘ã‘å±æ©Ÿé€šå ± | 1.0 |
| `positive` | `sales` | å¥‘ç´„ãƒ»å•†è«‡ | 0.7 |
| `positive` | `satisfaction` | é¡§å®¢ã‚µãƒãƒ¼ãƒˆ | 0.6 |
| `neutral` | `pricing` | å–¶æ¥­ãƒ—ãƒ­ã‚»ã‚¹ | 0.5 |
| `neutral` | `competition` | å–¶æ¥­ãƒ—ãƒ­ã‚»ã‚¹ | 0.5 |
| `neutral` | `sales` | å–¶æ¥­ãƒ—ãƒ­ã‚»ã‚¹ | 0.5 |
| `neutral` | `customer_service` | å‚¬ä¿ƒãƒ»æœªå¯¾å¿œã®ä¸æº€ | 0.7 |

### **ä¿¡é ¼åº¦è¨ˆç®—**
```typescript
function calculateConfidence(sentiment: string, category: string, priorityScore: number): number {
  let confidence = 0.5 // ãƒ™ãƒ¼ã‚¹ä¿¡é ¼åº¦
  
  // æ„Ÿæƒ…ã«ã‚ˆã‚‹èª¿æ•´
  if (sentiment === 'urgent') confidence += 0.3
  if (sentiment === 'negative') confidence += 0.2
  if (sentiment === 'positive') confidence += 0.1
  
  // å„ªå…ˆåº¦ã‚¹ã‚³ã‚¢ã«ã‚ˆã‚‹èª¿æ•´
  if (priorityScore > 8) confidence += 0.2
  if (priorityScore > 5) confidence += 0.1
  
  // ã‚«ãƒ†ã‚´ãƒªã«ã‚ˆã‚‹èª¿æ•´
  if (category === 'urgent') confidence += 0.2
  if (category === 'customer_service') confidence += 0.1
  
  return Math.min(confidence, 1.0) // æœ€å¤§1.0
}
```

## ğŸ“Š **å‡ºåŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**

### **æ„Ÿæƒ…åˆ†æçµæœ**
```typescript
{
  dominant_sentiment: 'negative',        // æ”¯é…çš„æ„Ÿæƒ…
  highest_priority: 'high',             // æœ€é«˜å„ªå…ˆåº¦
  priority_score: 8.5,                  // å„ªå…ˆåº¦ã‚¹ã‚³ã‚¢
  detected_categories: ['ã‚¯ãƒ¬ãƒ¼ãƒ ãƒ»è‹¦æƒ…', 'å‚¬ä¿ƒãƒ»æœªå¯¾å¿œ'], // æ¤œå‡ºã‚«ãƒ†ã‚´ãƒª
  detected_categories_english: ['customer_service', 'follow_up'], // è‹±èªã‚«ãƒ†ã‚´ãƒª
  keywords_found: ['ã‚¯ãƒ¬ãƒ¼ãƒ ', 'ã¾ã ã§ã™ã‹'] // æ¤œå‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
}
```

### **æ—¢å­˜ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°çµæœ**
```typescript
{
  existing_segment_id: 'complaint-urgent',
  existing_segment_name: 'ã‚¯ãƒ¬ãƒ¼ãƒ ãƒ»è‹¦æƒ…ç³»',
  existing_segment_description: 'é¡§å®¢ã‹ã‚‰ã®å¼·ã„ä¸æº€ã‚„è‹¦æƒ…ã®æ¤œå‡º',
  existing_segment_color: 'bg-red-100 text-red-800',
  existing_segment_priority: 'high',
  mapping_reason: 'negativeæ„Ÿæƒ… + customer_serviceã‚«ãƒ†ã‚´ãƒª â†’ ã‚¯ãƒ¬ãƒ¼ãƒ ãƒ»è‹¦æƒ…ç³»',
  mapping_confidence: 0.8
}
```

## ğŸ”§ **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªè¨­å®š**

### **1. ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¿½åŠ ãƒ»ä¿®æ­£**
- æ–°ã—ã„ã‚«ãƒ†ã‚´ãƒªã®è¿½åŠ 
- æ—¢å­˜ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®èª¿æ•´
- ã‚¹ã‚³ã‚¢å€¤ã®å¤‰æ›´

### **2. ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ã®èª¿æ•´**
- æ„Ÿæƒ…Ã—ã‚«ãƒ†ã‚´ãƒªã®çµ„ã¿åˆã‚ã›å¤‰æ›´
- ä¿¡é ¼åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®ä¿®æ­£
- æ–°ã—ã„æ—¢å­˜ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®è¿½åŠ 

### **3. ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°é‡ã¿ã®èª¿æ•´**
- å„ªå…ˆåº¦ã®é‡ã¿ä»˜ã‘å¤‰æ›´
- æ„Ÿæƒ…ã‚¹ã‚³ã‚¢ã®èª¿æ•´
- ä¿¡é ¼åº¦è¨ˆç®—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æœ€é©åŒ–

## ğŸ“ˆ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§**

- **å‡¦ç†é€Ÿåº¦**: 1ã‚¢ãƒ©ãƒ¼ãƒˆã‚ãŸã‚Š < 1ms
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: æœ€å°é™ï¼ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¾æ›¸ã®ã¿ï¼‰
- **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: ç„¡åˆ¶é™ï¼ˆãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ï¼‰
- **ç²¾åº¦**: è¨­å®šã•ã‚ŒãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ä¾å­˜

## ğŸš€ **ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§**

1. **æ©Ÿæ¢°å­¦ç¿’çµ±åˆ**: æ—¢å­˜ã®ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã¨çµ„ã¿åˆã‚ã›
2. **å‹•çš„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å­¦ç¿’**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«ã‚ˆã‚‹è‡ªå‹•èª¿æ•´
3. **å¤šè¨€èªå¯¾å¿œ**: è‹±èªã€ä¸­å›½èªç­‰ã®è¿½åŠ 
4. **æ„Ÿæƒ…å¼·åº¦ã®ç´°åˆ†åŒ–**: ã‚ˆã‚Šè©³ç´°ãªæ„Ÿæƒ…ãƒ¬ãƒ™ãƒ«ã®æ¤œå‡º
5. **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåˆ†æ**: å‰å¾Œã®æ–‡è„ˆã‚’è€ƒæ…®ã—ãŸåˆ†æ

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´8æœˆ20æ—¥  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ä½œæˆè€…**: AI Assistant  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Vep_copy_sub 